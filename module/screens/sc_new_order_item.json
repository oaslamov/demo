{
  "code":"sc_new_order_item:scr@demo1_prvt",
  "label":"$l{New item}l",
  "subject":"$l{Demo1}l",
  "show_in_menu":false,
  "args":[
    {
      "code":"order_id"
    }
  ],
  "grid":{
    "base":"screen",
    "cols":4,
    "rows":4
  },
  "width":"30",
  "height":"60",
  "actions":[
    "ds_product.submit>"
  ],
  "data_sources":[
    {
      "code":"ds_product",
      "table_name":"Demo1_Prvt.Shipping_Order_Product",
      "type":"table",
      "fields":[
        {
          "code":"comment",
          "label":"$l{f:7ef07d00900b}l",
          "type":"string",
          "hint":"$l{f:7ef07d00900b:d}l"
        },
        {
          "code":"id",
          "type":"string"
        },
        {
          "code":"price",
          "label":"$l{f:7ef07d009011}l",
          "type":"number",
          "edit_condition":"false",
          "hint":"$l{f:7ef07d009011:d}l"
        },
        {
          "code":"product",
          "label":"$l{f:7ef07d009008}l",
          "type":"ref",
          "mandatory":true,
          "ref":{
            "data":{
              "action":"demo1_prvt.selectList",
              "args":{
                "filter":[
                  "${@ref_filter}"
                ],
                "tablename":"Demo1_Prvt.Product"
              },
              "fields":[
                "id",
                "@name"
              ]
            }
          },
          "hint":"$l{f:7ef07d009008:d}l"
        },
        {
          "code":"quantity",
          "label":"$l{f:7ef07d00900a}l",
          "type":"integer",
          "hint":"$l{f:7ef07d00900a:d}l"
        },
        {
          "code":"shipping_order",
          "label":"$l{f:7ef07d009006}l",
          "type":"ref",
          "ref":{
            "data":{
              "action":"demo1_prvt.selectList",
              "args":{
                "filter":[
                  "${@ref_filter}"
                ],
                "tablename":"Demo1_Prvt.Shipping_Order"
              },
              "fields":[
                "id",
                "@name"
              ]
            }
          },
          "edit_condition":"false",
          "hint":"$l{f:7ef07d009006:d}l"
        },
        {
          "code":"sum",
          "label":"$l{f:7ef07d009012}l",
          "type":"number",
          "edit_condition":"false",
          "hint":"$l{f:7ef07d009012:d}l"
        }
      ],
      "operations":{
        "new":{
          "request":{
            "data":{
              "action":"demo1_prvt.new",
              "args":{
                "tablename":"demo1_prvt.shipping_order_product",
                "fields":{
                  "shipping_order":"${@screen.order_id}"
                }
              }
            },
            "dependencies":[
              "@sys.id"
            ]
          }
        }
      },
      "actions":[
        {
          "code":"submit",
          "label":"$l{Save}l",
          "type":"ok",
          "data_scope":"row",
          "request":{
            "data":{
              "action":"demo1_prvt.insert",
              "args":{
                "fields":"${@all_fields}",
                "tableName":"demo1_prvt.shipping_order_product"
              }
            }
          }
        }
      ]
    },
    {
      "code":"ds_order",
      "table_name":"Demo1_Prvt.Shipping_Order",
      "type":"table",
      "fields":[
        {
          "code":"comment",
          "label":"$l{f:7ef07d00800a}l",
          "type":"text",
          "hint":"$l{f:7ef07d00800a:d}l"
        },
        {
          "code":"customer",
          "label":"$l{f:7ef07d008006}l",
          "type":"ref",
          "ref":{
            "data":{
              "action":"demo1_prvt.selectList",
              "args":{
                "filter":[
                  "${@ref_filter}"
                ],
                "tablename":"Demo1_Prvt.Customer"
              },
              "fields":[
                "id",
                "@name"
              ]
            }
          },
          "hint":"$l{f:7ef07d008006:d}l"
        },
        {
          "code":"date_order_paid",
          "label":"$l{f:7ef07d008009}l",
          "type":"plaindate",
          "hint":"$l{f:7ef07d008009:d}l"
        },
        {
          "code":"datetime_order_placed",
          "label":"$l{f:7ef07d008008}l",
          "type":"datetime",
          "hint":"$l{f:7ef07d008008:d}l"
        },
        {
          "code":"id",
          "type":"string"
        },
        {
          "code":"shipment_date",
          "label":"$l{f:7ef07d00800b}l",
          "type":"plaindate",
          "hint":"$l{f:7ef07d00800b:d}l"
        },
        {
          "code":"total",
          "label":"$l{f:7ef07d00800e}l",
          "type":"number",
          "hint":"$l{f:7ef07d00800e:d}l"
        }
      ],
      "operations":{
        "select":{
          "request":{
            "data":{
              "action":"demo1_prvt.selectList",
              "args":{
                "filter":[
                  "id=${@screen.order_id}"
                ],
                "tablename":"demo1_prvt.shipping_order"
              }
            }
          }
        }
      }
    }
  ],
  "parts":[
    {
      "code":"p_item",
      "type":"form",
      "border_type":"none",
      "position":{
        "from_col":1,
        "to_col":4,
        "from_row":3,
        "to_row":4
      },
      "data_source":{
        "code":"ds_product",
        "fields":[
          {
            "code":"product"
          },
          {
            "code":"quantity"
          },
          {
            "code":"comment"
          }
        ],
        "operations":[
          "new"
        ]
      }
    },
    {
      "code":"p_order",
      "label":"$l{Order}l # ${ds_order.id}",
      "type":"form",
      "border_type":"none",
      "position":{
        "from_col":1,
        "to_col":4,
        "from_row":1,
        "to_row":2
      },
      "data_source":{
        "code":"ds_order",
        "fields":[
          {
            "code":"customer"
          },
          {
            "code":"date_order_paid"
          },
          {
            "code":"datetime_order_placed"
          },
          {
            "code":"shipment_date"
          }
        ],
        "operations":[
          "select"
        ]
      }
    }
  ]
}