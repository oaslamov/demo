{
  "code":"sc_analysis:scr@demo1_prvt",
  "label":"$l{Data analysis}l",
  "serverStatus":"r",
  "subject":"$l{Demo1}l",
  "sort_order":"Z60",
  "grid":{
    "base":"screen",
    "cols":16,
    "rows":16
  },
  "actions":[
    "ds_p.makeStats"
  ],
  "data_sources":[
    {
      "code":"ds_chart1",
      "type":"chart",
      "operations":{
        "select":{
          "request":{
            "data":{
              "action":"demo1_prvt.getChartABC"
            }
          }
        }
      }
    },
    {
      "code":"ds_p",
      "table_name":"Demo1_Prvt.Product_Abc",
      "type":"table",
      "fields":[
        {
          "code":"abc_class",
          "label":"$l{f:7ef07d01e00e}l",
          "type":"enum",
          "enum":[
            {
              "label":"$l{e:7ef07d01e00e.A}l",
              "value":"A"
            },
            {
              "label":"$l{e:7ef07d01e00e.B}l",
              "value":"B"
            },
            {
              "label":"$l{e:7ef07d01e00e.C}l",
              "value":"C"
            }
          ],
          "hint":"$l{f:7ef07d01e00e:d}l"
        },
        {
          "code":"avg_price",
          "label":"$l{f:7ef07d01e007}l",
          "type":"number",
          "hint":"$l{f:7ef07d01e007:d}l"
        },
        {
          "code": "cuperc",
          "label": "$l{f:7ef07d01e00d}l",
          "type": "number",
          "format": "#0.0",
          "hint": "$l{f:7ef07d01e00d:d}l"
        },
        {
          "code":"cusum",
          "label":"$l{f:7ef07d01e00c}l",
          "type":"number",
          "hint":"$l{f:7ef07d01e00c:d}l"
        },
        {
          "code":"id",
          "type":"string"
        },
        {
          "code":"name",
          "label":"$l{f:7ef07d01e006}l",
          "type":"string",
          "hint":"$l{f:7ef07d01e006:d}l"
        },
        {
          "code":"quantity",
          "label":"$l{f:7ef07d01e008}l",
          "type":"integer",
          "hint":"$l{f:7ef07d01e008:d}l"
        },
        {
          "code":"sum",
          "label":"$l{f:7ef07d01e009}l",
          "type":"number",
          "hint":"$l{f:7ef07d01e009:d}l"
        }
      ],
      "operations":{
        "select":{
          "request":{
            "data":{
              "action":"demo1_prvt.selectList",
              "args":{
                "filter":[
                  "${@user_filter}"
                ],
                "startFrom":"0",
                "count":"5000",
                "tableName":"demo1_prvt.product_abc"
              },
              "fields":[
                "name",
                "avg_price",
                "quantity",
                "sum",
                "cusum",
                "cuperc",
                "abc_class"
              ]
            }
          }
        }
      },
      "actions":[
        {
          "code":"makeStats",
          "label":"$l{Analyze}l",
          "data_scope":"none",
          "request":{
            "data":{
              "action":"demo1_prvt.makeStats",
              "args":{
                "start":"",
                "bcLimit":"90",
                "finish":"",
                "abLimit":"65"
              }
            }
          },
          "freshen":[
            {
              "code":"ds_p",
              "type":"all_rows"
            },
            {
              "code":"ds_c",
              "type":"all_rows"
            },
            {
              "code":"ds_chart1",
              "type":"all_rows"
            },
            {
              "code":"ds_chart2",
              "type":"all_rows"
            },
            {
              "code":"ds_chart3",
              "type":"all_rows"
            },
            {
              "code":"ds_chart4",
              "type":"all_rows"
            }
          ]
        }
      ]
    },
    {
      "code":"ds_c",
      "table_name":"Demo1_Prvt.Customer_Abc",
      "type":"table",
      "fields":[
        {
          "code":"abc_class",
          "label":"$l{f:7ef07d01f00c}l",
          "type":"enum",
          "enum":[
            {
              "label":"$l{e:7ef07d01f00c.A}l",
              "value":"A"
            },
            {
              "label":"$l{e:7ef07d01f00c.B}l",
              "value":"B"
            },
            {
              "label":"$l{e:7ef07d01f00c.C}l",
              "value":"C"
            }
          ],
          "hint":"$l{f:7ef07d01f00c:d}l"
        },
        {
          "code": "cuperc",
          "label": "$l{f:7ef07d01f00b}l",
          "type": "number",
          "format": "#0.0",
          "hint": "$l{f:7ef07d01f00b:d}l"
        },
        {
          "code":"cusum",
          "label":"$l{f:7ef07d01f00a}l",
          "type":"number",
          "hint":"$l{f:7ef07d01f00a:d}l"
        },
        {
          "code":"id",
          "type":"string"
        },
        {
          "code":"name",
          "label":"$l{f:7ef07d01f008}l",
          "type":"string",
          "hint":"$l{f:7ef07d01f008:d}l"
        },
        {
          "code":"sum",
          "label":"$l{f:7ef07d01f009}l",
          "type":"number",
          "hint":"$l{f:7ef07d01f009:d}l"
        }
      ],
      "operations":{
        "select":{
          "request":{
            "data":{
              "action":"demo1_prvt.selectList",
              "args":{
                "filter":[
                  "${@user_filter}"
                ],
                "startFrom":"0",
                "count":"5000",
                "tableName":"demo1_prvt.customer_abc"
              },
              "fields":[
                "name",
                "sum",
                "cusum",
                "cuperc",
                "abc_class"
              ]
            }
          }
        }
      }
    },
    {
      "code":"ds_chart2",
      "type":"chart",
      "operations":{
        "select":{
          "request":{
            "data":{
              "action":"demo1_prvt.getChartOrderTotals",
              "args":{
                "points":"800,400,1200,1600"
              }
            }
          }
        }
      }
    },
    {
      "code":"ds_chart3",
      "type":"chart",
      "operations":{
        "select":{
          "request":{
            "data":{
              "action":"demo1_prvt.getChartSalesByCountry"
            }
          }
        }
      }
    },
    {
      "code":"ds_chart4",
      "type":"chart",
      "operations":{
        "select":{
          "request":{
            "data":{
              "action":"demo1_prvt.getChartSalesPercentageByCountry"
            }
          }
        }
      }
    }
  ],
  "parts":[
    {
      "code":"t1",
      "type":"tabs",
      "border_type":"none",
      "position":{
        "from_col":1,
        "to_col":16,
        "from_row":1,
        "to_row":16
      },
      "data_source":{
      },
      "sub_parts":[
        {
          "code":"c11",
          "label":"$l{Products ABC}l",
          "type":"table",
          "border_type":"none",
          "position":{
            "from_col":1,
            "to_col":16,
            "from_row":1,
            "to_row":16
          },
          "data_source":{
          },
          "sub_parts":[
            {
              "code":"p111",
              "type":"table",
              "border_type":"none",
              "position":{
                "from_col":1,
                "to_col":16,
                "from_row":1,
                "to_row":16
              },
              "data_source":{
                "code":"ds_p",
                "fields":[
                  {
                    "code":"name"
                  },
                  {
                    "code":"quantity"
                  },
                  {
                    "code":"avg_price"
                  },
                  {
                    "code":"sum"
                  },
                  {
                    "code":"cusum"
                  },
                  {
                    "code":"cuperc"
                  },
                  {
                    "code":"abc_class"
                  }
                ],
                "order":[
                  {
                    "field":"cusum"
                  }
                ],
                "operations":[
                  "select"
                ]
              }
            }
          ]
        },
        {
          "code":"c12",
          "label":"$l{Customers ABC}l",
          "type":"container",
          "border_type":"none",
          "position":{
            "from_col":1,
            "to_col":16,
            "from_row":1,
            "to_row":16
          },
          "sub_parts":[
            {
              "code":"p121",
              "type":"table",
              "border_type":"none",
              "position":{
                "from_col":1,
                "to_col":16,
                "from_row":1,
                "to_row":16
              },
              "data_source":{
                "code":"ds_c",
                "fields":[
                  {
                    "code":"name"
                  },
                  {
                    "code":"sum"
                  },
                  {
                    "code":"cusum"
                  },
                  {
                    "code":"cuperc"
                  },
                  {
                    "code":"abc_class"
                  }
                ],
                "order":[
                  {
                    "field":"cusum"
                  }
                ],
                "operations":[
                  "select"
                ]
              }
            }
          ]
        },
        {
          "code":"c13",
          "label":"$l{Charts}l",
          "type":"container",
          "border_type":"none",
          "position":{
            "from_col":1,
            "to_col":16,
            "from_row":1,
            "to_row":16
          },
          "sub_parts":[
            {
              "code":"p_ch1",
              "label":"$l{ABC analysis graph}l",
              "type":"chart",
              "chart_type":"spline",
              "border_type":"none",
              "position":{
                "from_col":1,
                "to_col":8,
                "from_row":1,
                "to_row":8
              },
              "data_source":{
                "code":"ds_chart1",
                "operations":[
                  "select"
                ]
              }
            },
            {
              "code":"p_ch2",
              "label":"$l{Number of shipping orders by order totals}l",
              "type":"chart",
              "chart_type":"pie",
              "border_type":"none",
              "position":{
                "from_col":9,
                "to_col":16,
                "from_row":1,
                "to_row":8
              },
              "data_source":{
                "code":"ds_chart2",
                "operations":[
                  "select"
                ]
              }
            },
            {
              "code":"p_ch3",
              "label":"$l{Sales by country}l",
              "type":"chart",
              "chart_type":"bar",
              "border_type":"none",
              "position":{
                "from_col":1,
                "to_col":8,
                "from_row":9,
                "to_row":16
              },
              "data_source":{
                "code":"ds_chart3",
                "operations":[
                  "select"
                ]
              }
            },
            {
              "code":"p_ch4",
              "label":"$l{Percentage of sales by country}l",
              "type":"chart",
              "chart_type":"stackedbar",
              "border_type":"none",
              "position":{
                "from_col":9,
                "to_col":16,
                "from_row":9,
                "to_row":16
              },
              "data_source":{
                "code":"ds_chart4",
                "operations":[
                  "select"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}